@page "{id:int}"
@model Jas.Areas.Ptg.Pages.PieceDetailModel
@{
    ViewData["Title"] = "Kusový stojan";
}

<div class="container my-5">
    @* Reuse the same partial as plátový: one "plate" only *@
    @{
        var img = string.IsNullOrWhiteSpace(Model.Stand?.Picture) ? "/images/no-picture.png" : Model.Stand!.Picture;
        var firstPlate = Model.Plates.FirstOrDefault();
        var items = firstPlate is null
            ? new List<Jas.Models.Ptg.PlateItem>()
            : Model.PlateItems.Where(x => x.IdPtPlate == firstPlate.Id)
                              .OrderBy(x => x.ItemOrder)
                              .ToList();
    }

    @await Html.PartialAsync("_PlateContent", new Jas.Areas.Ptg.Pages.PlateContentVm
    {
        StandId = Model.Stand!.IdStand,
        StandName = Model.Stand!.Name,
        StandType = Model.Stand!.Type,
        PlateIndex = 1,
        TotalPlates = 1,
        ImgUrl = img,
        Items = items
    })
</div>

@section Scripts {
    <script src="~/js/ptg/stand-detail.js" asp-append-version="true"></script>
}
